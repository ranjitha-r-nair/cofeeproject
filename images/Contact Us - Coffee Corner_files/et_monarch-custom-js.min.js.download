(function(a){a(function(){var g=0,r,i,o,b;z(),a('body').on('click','.et_social_share',function(){var b=a(this),d=b.data('social_type'),c=b.data('social_name'),e='media'==d?b.data('social_link'):b.prop('href'),f,g,h;return!(n(c,b),'like'===c)&&(f=a(window).width()/2-550/2,g=a(window).height()/2-450/2,h=window.open(e,'','scrollbars=1, height=450, width=550, left='+f+', top='+g),window.focus&&h.focus(),!1)}),a('.et_social_follow').on('click',function(){var b=a(this),c=b.data('social_name');if(n(c,b),'like'===c)return!1}),a('body').on('click','.et_social_share_pinterest',function(){if(a(this).hasClass('et_social_pin_all')){var b=a(window).width()/2-550/2,c=a(window).height()/2-450/2,d=a(this).attr('href'),e=window.open(d,'','scrollbars=1, height=450, width=550, left='+b+', top='+c);window.focus&&e.focus()}else a('.et_social_pin_images_outer').fadeToggle(400);return!1});function v(d){for(var e=window.location.search.substring(1),b=e.split('&'),a=0,c;a<b.length;a++)if(c=b[a].split('='),c[0]==d)return c[1]}function n(d,b){var c=b.data('social_type'),f='media'==c?b.closest('.et_social_media_wrapper').find('img').attr('src'):'',e=b.data('post_id'),i=b.data('location'),g='';g=JSON.stringify({action:c,network:d,media_url:f,post_id:e,location:i}),a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'add_stats_record_db',stats_data_array:g,add_stats_nonce:monarchSettings.stats_nonce},success:function(a){!0==a&&('like'===c&&h(b,'',e,d,'like'),'media'===c&&(j(b.closest('.et_social_media_wrapper')),h(b,f,e,d,'media')))}})}function t(b){var e=b.data('social_name'),f=b.data('min_count'),g=b.data('post_id'),h=monarchSettings.pageurl!==''?monarchSettings.pageurl:window.location.href,c=b.find('.et_social_network_label'),d=0!=c.length?c:b;$share_count_data=JSON.stringify({network:e,min_count:f,post_id:g,url:h}),a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'get_shares_count',share_count_array:$share_count_data,get_share_counts_nonce:monarchSettings.share_counts},beforeSend:function(a){d.append('<span class="et_social_placeholder"></span>')},success:function(a){b.find('span.et_social_placeholder').remove(),d.append(a)}})}function u(c){var d=c.data('post_id'),e=monarchSettings.pageurl!==''?monarchSettings.pageurl:window.location.href,b=c;$share_total_count_data=JSON.stringify({post_id:d,url:e}),a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'get_total_shares',share_total_count_array:$share_total_count_data,get_total_counts_nonce:monarchSettings.total_counts},beforeSend:function(a){b.append('<span class="et_social_placeholder"></span>')},success:function(a){b.find('span.et_social_placeholder').remove(),b.append(a)}})}function x(b){var d=b.data('network'),e=b.data('min_count'),f=b.data('index'),c=b;$follow_count_data=JSON.stringify({network:d,min_count:e,index:f}),a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'get_follow_counts',follow_count_array:$follow_count_data,get_follow_counts_nonce:monarchSettings.follow_counts},beforeSend:function(a){c.append('<span class="et_social_placeholder"></span>')},success:function(a){b.find('span.et_social_placeholder').remove(),c.append(a)}})}function s(c){var b=c;a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'get_follow_total',get_total_counts_nonce:monarchSettings.total_counts},beforeSend:function(a){b.append('<span class="et_social_placeholder"></span>')},success:function(a){b.find('span.et_social_placeholder').remove(),b.append(a)}})}a('.et_social_display_follow_counts').length&&a('.et_social_display_follow_counts').each(function(){x(a(this))}),a('.et_social_follow_total').length&&a('.et_social_follow_total').each(function(){s(a(this))}),a('.et_social_total_share').length&&a('.et_social_total_share').each(function(){u(a(this))}),a('.et_social_display_count').length&&a('.et_social_display_count').each(function(){t(a(this))}),a('.et_social_media_wrapper').length&&a('.et_social_media_wrapper .et_social_totalcount').length&&a('.et_social_media_wrapper').each(function(){j(a(this))}),a('.et_social_media_wrapper').length&&a('.et_social_media_wrapper .et_social_withcounts').length&&a('.et_social_media_wrapper .et_social_share').each(function(){var b=a(this),c=b.closest('.et_social_media_wrapper').find('img').attr('src'),d=b.data('post_id'),e=b.data('social_name');h(b,c,d,e,'media')});function j(c){if(a('.et_social_totalcount').length){var b=c,d=b.find('img').attr('src'),e=b.find('.et_social_share').first().data('post_id'),f=JSON.stringify({media_url:d,post_id:e});a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'get_media_shares_total',media_total:f,get_media_shares_total_nonce:monarchSettings.media_total},success:function(a){b.find('.et_social_totalcount_count').empty().append(a)}})}}function h(b,c,d,e,f){if(a('.et_social_withcounts').length){var g=JSON.stringify({media_url:c,post_id:d,network:e,action:f});a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'get_shares_single',media_single:g,get_media_shares_nonce:monarchSettings.media_single},success:function(a){b.find('.et_social_count span').not('.et_social_count_label').empty().append(a)}})}}function y(b){var c=b*24*60*60*1e3,a=new Date;return a.setTime(a.getTime()+c),"; expires="+a.toUTCString()}function c(a,b){return w()[a]===b}function w(){for(var b=document.cookie.split('; '),c={},a=b.length-1,d;a>=0;a--)d=b[a].split('='),c[d[0]]=d[1];return c}function f(a){cookieExpire=y(a),document.cookie='etSocialCookie=true'+cookieExpire}function e(b,c){setTimeout(function(){b.addClass('et_social_visible et_social_animated'),a('.et_social_resize').length&&a('.et_social_resize').each(function(){d(a(this))})},c)}function p(d,g){var a=d,b,h;a.hasClass('et_social_animated')||(b=!!a.data('cookie_duration')&&a.data('cookie_duration'),h=g,(!1!==b&&!c('etSocialCookie','true')||!1==b)&&(e(a,h),!1!==b&&f(b)))}'true'==v('et_monarch_popup')&&a('.et_social_after_comment').each(function(){var b=a(this);p(b,0)}),a('.et_social_auto_popup').length&&a('.et_social_auto_popup').each(function(){var b=a(this);p(b,''!==b.data('delay')?b.data('delay')*1e3:0)}),a('.et_social_pinterest_window .et_social_close').on('click',function(){a('.et_social_pin_images_outer').fadeToggle(400)}),a('body').on('click','.et_social_icon_cancel',function(){var b=a(this);return b.parent().hasClass('et_social_flyin')?$popup=b.parent():($popup=b.parent().parent(),$popup.hasClass('et_social_all_networks_popup')&&(g=0)),$popup.addClass('et_social_fadeout'),setTimeout(function(){$popup.remove()},800),!1}),a('.et_monarch_after_order').length&&a('.et_social_after_purchase').each(function(){var b=a(this),d,g;b.hasClass('et_social_animated')||(d=!!b.data('cookie_duration')&&b.data('cookie_duration'),g=0,(!1!==d&&!c('etSocialCookie','true')||!1==d)&&(e(b,g),!1!==d&&f(d)))}),a('.et_social_trigger_bottom').length&&a('.et_social_trigger_bottom').each(function(){q(a(this),!0)}),a('.et_social_scroll').length&&a('.et_social_scroll').each(function(){q(a(this),!1)});function q(g,j){var b=g,e,h,i;b.hasClass('et_social_animated')||(e=!!b.data('cookie_duration')&&b.data('cookie_duration'),!0==j?(h=a('.et_social_bottom_trigger').length?a('.et_social_bottom_trigger').offset().top:a(document).height()-500):(i=g.data('scroll_pos')>100?100:g.data('scroll_pos'),h=100==i?a(document).height()-10:a(document).height()*i/100),a(window).on('scroll',function(){(!1!==e&&!c('etSocialCookie','true')||!1==e)&&a(window).scrollTop()+a(window).height()>h&&(b.addClass('et_social_visible et_social_animated'),a('.et_social_resize').length&&a('.et_social_resize').each(function(){d(a(this))}),!1!==e&&f(e))}))}a('.et_social_trigger_idle').length&&a('.et_social_trigger_idle').each(function(){var b=a(this),d,g;b.hasClass('et_social_animated')||(d=!!b.data('cookie_duration')&&b.data('cookie_duration'),g=''!==b.data('idle_timeout')?b.data('idle_timeout')*1e3:3e4,(!1!==d&&!c('etSocialCookie','true')||!1==d)&&(a(document).idleTimer(g),a(document).on("idle.idleTimer",function(){e(b,0)}),!1!==d&&f(d)))}),a('.et_social_heading, .et_social_mobile_button').on('click',function(){$this_mobile_div=a('.et_social_mobile'),$this_mobile_div.css({display:'block'}),a('.et_social_mobile_button').removeClass('et_social_active_button'),$this_mobile_div.hasClass('et_social_opened')?($this_mobile_div.find('.et_social_networks').slideToggle(600),$this_mobile_div.removeClass('et_social_opened').addClass('et_social_closed'),a('.et_social_mobile_overlay').removeClass('et_social_visible_overlay'),a('.et_social_mobile_overlay').fadeToggle(600)):($this_mobile_div.removeClass('et_social_closed').addClass('et_social_opened'),$this_mobile_div.find('.et_social_networks').slideToggle(600),a('.et_social_mobile_overlay').addClass('et_social_visible_overlay').css({display:'block'}))}),a('.et_social_mobile .et_social_close').on('click',function(){$mobile_div=a('.et_social_mobile'),$mobile_div.fadeToggle(600),a('.et_social_mobile_button').addClass('et_social_active_button'),$mobile_div.hasClass('et_social_opened')&&(a('.et_social_mobile_overlay').fadeToggle(600),$mobile_div.removeClass('et_social_opened'),$mobile_div.find('.et_social_networks').fadeToggle(600))}),a('.et_social_inline').length&&a('body').hasClass('et_pb_pagebuilder_layout')&&(r=a('.et_social_inline_top'),i=a('.et_social_inline_bottom'),o='<div class="et_pb_row"><div class="et_pb_column et_pb_column_4_4"></div></div>',a('.et-l--post').first().length>0?(b=a('.et-l--post .et_pb_section').not('.et_pb_fullwidth_section')):(b=a('.et_pb_section:not(.et-l .et_pb_section)').not('.et_pb_fullwidth_section')),b.length>0&&r.length&&b.first().prepend(o).find('.et_pb_row').first().find('.et_pb_column').append(r),b.length>0&&i.length&&b.last().append(o).find('.et_pb_row').last().find('.et_pb_column').append(i));function d(b){setTimeout(function(){var c=b,h=c.find('.et_social_networks'),f=c.find('.et_social_header').outerHeight()||0,d=c.find('.et_social_totalcount').height(),g=0<d?20:0,e,i,j;c.height(c.find('.et_social_icons_container').innerHeight()+f+d+20+g),e=c.hasClass('et_social_popup_content')?a(window).height():a(window).height()-60,c.hasClass('et_social_popup_content')&&768<a(window).width()&&(e=e-50),c.css({'max-height':e+'px'}),c.hasClass('et_social_popup_content')&&(i=a(window).height()/2-c.innerHeight()/2,c.css({top:i+'px'})),j=c.height()-f+d-g,h.height(j)},400)}function m(){setTimeout(function(){var b=a('.et_social_mobile'),c,d;b.hasClass('et_social_opened')||a('.et_social_mobile .et_social_networks').css({display:'block'}),a('.et_social_active_button').length&&b.css({display:'block'}),c=b.find('.et_social_icons_container').innerHeight()+45,b.hasClass('et_social_opened')||a('.et_social_mobile .et_social_networks').css({display:'none'}),a('.et_social_active_button').length&&b.css({display:'none'}),b.find('.et_social_networks').css({'max-height':c+'px',height:c+'px'}),a(window).height()<c&&(d=a(window).height()-b.find('.et_social_heading').innerHeight()+10,b.find('.et_social_networks').css({height:d+'px'}))},400)}function l(){if(a('.et_social_sidebar_networks').length){var c=a('.et_social_sidebar_networks'),b=a(window).height()/2-c.innerHeight()/2;b=0>b?0:b,c.css({top:b+'px'})}}function k(){a('.et_social_media_wrapper').length&&(a('.et_social_media_wrapper').each(function(){var b=a(this),c=b.find('.et_social_media'),d=b.find('img'),e=d.position(),f=typeof e!='undefined'?e.left:0,g=d.height(),h=d.width(),i=b.find('.et_social_networks').innerHeight();b.addClass(d.attr('class')),c.css({'max-height':g+'px'}),c.css({height:i+50+'px'}),c.width(h-80),0!==f&&c.css({left:f+20+'px'})}),A())}function z(){var b=a('.et_pb_gallery_grid .et_social_media_wrapper');if(0>b.length)return;b.each(function(){var b=a(this),d=b.closest('.et_pb_gallery_image'),c=d.find('.et_overlay');0<c.length&&b.append(c)})}function A(){var b=a('.et_pb_gallery_fullwidth .et_social_media_wrapper'),c;if(0>b.length)return;c=a('.et_pb_gallery_fullwidth'),c.each(function(){var d=a(this),b=d.find('.et_social_media_wrapper .et_social_media'),c,e,f,g;if(0>b.length)return;c=b.first(),e=c.width(),f=c.css('height'),g=c.css('max-height'),b.width(e-80),b.height(f),b.css({'max-height':g+'px'})})}a('body').on('click','.et_social_open_all',function(){if(g++,1==g){var b=a(this),f=b.data('page_id'),h=b.data('permalink'),i=b.data('title'),j=typeof b.data('media')!='undefined'?b.data('media'):'',c='popup'==b.data('location')?'true':'false';a.ajax({type:'POST',url:monarchSettings.ajaxurl,data:{action:'generate_all_networks_popup',all_networks_page_id:f,all_networks_link:h,all_networks_title:i,all_networks_media:j,is_popup:c,generate_all_window_nonce:monarchSettings.generate_all_window_nonce},success:function(f){if('false'==c)a('body').append(f),e(a('.et_social_all_networks_popup'),1);else{var h=b.parent().closest('.et_social_popup_content');b.parent().replaceWith(f),d(h),g=0}}})}return!1}),m(),l(),a(window).on('resize',()=>{a('.et_social_resize').length&&a('.et_social_resize').each(function(){d(a(this))}),a('.et_social_mobile')&&m(),a('.et_social_sidebar_networks').length&&l(),k()}),a('.et_social_hide_sidebar').on('click',function(){a('.et_social_hide_sidebar').toggleClass('et_social_hidden_sidebar'),a('.et_social_sidebar_networks').toggleClass('et_social_hidden_sidebar et_social_visible_sidebar')}),a(window).on('load',function(){if(k(),a('.et_social_pin_images').length&&(a('.et_social_all_button').length||a('.et_social_pinterest').length)){var b=a('.et_social_pin_images'),d=b.data('permalink'),e=b.data('title'),f=b.data('post_id'),c=0;a('img').each(function(){var b,g,h,i;a(this).hasClass('avatar')||(b=a(this).attr('src'),g=a(this).attr('alt'),''!=b&&(h='http://www.pinterest.com/pin/create/button/?url='+d+'&media='+b+'&description='+e,i='<div class="et_social_pin_image"><a href="'+h+'" rel="nofollow" class="et_social_icon et_social_share" data-social_name="pinterest" data-post_id="'+f+'" data-social_type="share"><img src="'+b+'" alt="'+g+'"/><span class="et_social_pin_overlay et_social_icon"></span></a></div>',a('.et_social_pin_images').append(i),c++))}),0==c&&a('.et_social_pin_images').append(monarchSettings.no_img_message)}})})})(jQuery)