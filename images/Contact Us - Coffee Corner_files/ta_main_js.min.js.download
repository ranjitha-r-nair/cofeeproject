var thirstyFunctions;jQuery(document).ready(function(a){thirstyFunctions={recordLinkStatEvents:function(){thirsty_global_vars.enable_record_stats=='yes'&&a('body').on('click','a',thirstyFunctions.recordLinkStat)},recordLinkStat:function(h){var b=a(this),c=b.attr('href'),g=b.data('linkid'),d=b[0].innerText,i=c?c.split('?')[1]:'',f,e;if(d||(d=b.text()),!thirstyFunctions.isThirstyLink(c)&&!g)return;if(b.data("clicked")){h.preventDefault();return}b.data("clicked",!0),!d&&b.find('img').length&&(f=b.find('img').prop('src').split('/'),d=f[f.length-1]),thirsty_global_vars.enable_js_redirect==='yes'&&b.data('nojs')!=!0&&(h.preventDefault(),b.prop('target')=='_blank'&&!thirstyFunctions.disableNewWindow()&&(e=window.open('','_blank'))),a.post(thirsty_global_vars.ajax_url,{action:'ta_click_data_redirect',href:c,page:window.location.href,link_id:g,keyword:d,qs:i},function(a){if(b.data("clicked",!1),thirsty_global_vars.enable_js_redirect!=='yes'||b.data('nojs')==!0)return;e?e.location.href=a||c:window.location.href=a||c}).fail(function(){if(b.data("clicked",!1),thirsty_global_vars.enable_js_redirect!=='yes'||b.data('nojs')==!0)return;e?e.location.href=c:window.location.href=c})},disableNewWindow:function(){var a=['FBAN','MessengerForiOS','FBAV','Instagram','Pinterest','Twitter','Electron','Steam'],b;for(b in a)if(navigator.userAgent.indexOf(a[b])>=0)return!0;return!1},isThirstyLink:function(d){if(!d)return;d=d.replace('http:','{protocol}').replace('https:','{protocol}');var c=d.replace(thirsty_global_vars.home_url,'').replace('{protocol}',''),e,f;return c=c.indexOf('/')==0?c.replace('/',''):c,e=c.substr(0,c.indexOf('/')),f=d.replace('/'+e+'/','/'+thirsty_global_vars.link_prefix+'/').replace('{protocol}',window.location.protocol),!!(e&&a.inArray(e,b)>-1)&&f},linkFixer:function(){if(thirsty_global_vars.link_fixer_enabled!=='yes')return;var b=a('body a'),e=[],d,f,g,h,c;for(c=0;c<b.length;c++)d=a(b[c]).attr('href'),f=a(b[c]).attr('class'),g=a(b[c]).data('shortcode'),h=a(b[c]).has('img').length,d=thirstyFunctions.isThirstyLink(d),d&&!g&&e.push({key:c,class:f,href:d,is_image:h}),a(b[c]).removeAttr('data-shortcode');if(e.length<1)return;a.post(thirsty_global_vars.ajax_url,{action:'ta_link_fixer',hrefs:e,post_id:thirsty_global_vars.post_id},function(c){if(c.status=='success')for(x in c.data){if(typeof c.data[x]!='object')continue;var d=c.data[x].key,g=a(b[d]).prop('href'),h=g?g.split('?')[1]:'',e=c.data[x].href,i=c.data[x].title,f=c.data[x].class,j;h&&c.data[x].pass_qs&&(j=e.indexOf('?')<0?'?':'&',e=e+j+h),e=e.replace('http:',window.location.protocol).replace('https:',window.location.protocol),i?a(b[d]).prop('title',i):a(b[d]).removeAttr('title'),thirsty_global_vars.disable_thirstylink_class=='yes'&&(f=f.replace('thirstylinkimg','').replace('thirstylink','').trim()),f?a(b[d]).prop('class',f):a(b[d]).removeAttr('class'),a(b[d]).prop('href',e).prop('rel',c.data[x].rel).prop('target',c.data[x].target).attr('data-linkid',c.data[x].link_id),thirsty_global_vars.enable_js_redirect==='yes'&&a(b[d]).attr('data-nojs',c.data[x].nojs)}},'json')}};var b=a.map(thirsty_global_vars.link_prefixes,function(a,b){return[a]});thirstyFunctions.recordLinkStatEvents(),thirstyFunctions.linkFixer()})